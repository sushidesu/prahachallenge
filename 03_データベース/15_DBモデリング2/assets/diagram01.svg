<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="584px" preserveAspectRatio="none" style="width:791px;height:584px;" version="1.1" viewBox="0 0 791 584" width="791px" zoomAndPan="magnify"><defs><filter height="300%" id="f1iijybiyjgz3m" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[3fd616f346a44cd59a91eb10b19e157c]
class User--><rect codeLine="3" fill="#FEFECE" filter="url(#f1iijybiyjgz3m)" height="73.6094" id="User" style="stroke:#A80036;stroke-width:1.5;" width="61" x="232" y="344"/><ellipse cx="247" cy="360" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M251.1094,366 L243.3906,366 L243.3906,353.6094 L251.1094,353.6094 L251.1094,355.7656 L245.8438,355.7656 L245.8438,358.4375 L250.6094,358.4375 L250.6094,360.5938 L245.8438,360.5938 L245.8438,363.8438 L251.1094,363.8438 L251.1094,366 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="29" x="261" y="364.1543">User</text><line style="stroke:#A80036;stroke-width:1.5;" x1="233" x2="292" y1="376" y2="376"/><ellipse cx="243" cy="387" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="10" x="252" y="390.2104">id</text><line style="stroke:#A80036;stroke-width:1.0;" x1="233" x2="292" y1="396.8047" y2="396.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="32" x="238" y="411.0151">name</text><!--MD5=[10bc7e04560ded350ca526c54f7f604e]
class WorkSpace--><rect codeLine="9" fill="#FEFECE" filter="url(#f1iijybiyjgz3m)" height="73.6094" id="WorkSpace" style="stroke:#A80036;stroke-width:1.5;" width="102" x="32.5" y="19.5"/><ellipse cx="47.5" cy="35.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M51.6094,41.5 L43.8906,41.5 L43.8906,29.1094 L51.6094,29.1094 L51.6094,31.2656 L46.3438,31.2656 L46.3438,33.9375 L51.1094,33.9375 L51.1094,36.0938 L46.3438,36.0938 L46.3438,39.3438 L51.6094,39.3438 L51.6094,41.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="70" x="61.5" y="39.6543">WorkSpace</text><line style="stroke:#A80036;stroke-width:1.5;" x1="33.5" x2="133.5" y1="51.5" y2="51.5"/><ellipse cx="43.5" cy="62.5" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="10" x="52.5" y="65.7104">id</text><line style="stroke:#A80036;stroke-width:1.0;" x1="33.5" x2="133.5" y1="72.3047" y2="72.3047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="32" x="38.5" y="86.5151">name</text><!--MD5=[1e4e6ac1845d89d680410515caa0c0ac]
class Channel--><rect codeLine="15" fill="#FEFECE" filter="url(#f1iijybiyjgz3m)" height="73.6094" id="Channel" style="stroke:#A80036;stroke-width:1.5;" width="83" x="411" y="19.5"/><ellipse cx="426" cy="35.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M430.1094,41.5 L422.3906,41.5 L422.3906,29.1094 L430.1094,29.1094 L430.1094,31.2656 L424.8438,31.2656 L424.8438,33.9375 L429.6094,33.9375 L429.6094,36.0938 L424.8438,36.0938 L424.8438,39.3438 L430.1094,39.3438 L430.1094,41.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="51" x="440" y="39.6543">Channel</text><line style="stroke:#A80036;stroke-width:1.5;" x1="412" x2="493" y1="51.5" y2="51.5"/><ellipse cx="422" cy="62.5" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="10" x="431" y="65.7104">id</text><line style="stroke:#A80036;stroke-width:1.0;" x1="412" x2="493" y1="72.3047" y2="72.3047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="32" x="417" y="86.5151">name</text><!--MD5=[f60e6fe7a0c9894f215c8e788b5525d7]
class CreateChannelInWorkSpace--><rect codeLine="22" fill="#FEFECE" filter="url(#f1iijybiyjgz3m)" height="99.2188" id="CreateChannelInWorkSpace" style="stroke:#A80036;stroke-width:1.5;" width="206" x="169.5" y="7"/><ellipse cx="184.5" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M188.6094,29 L180.8906,29 L180.8906,16.6094 L188.6094,16.6094 L188.6094,18.7656 L183.3438,18.7656 L183.3438,21.4375 L188.1094,21.4375 L188.1094,23.5938 L183.3438,23.5938 L183.3438,26.8438 L188.6094,26.8438 L188.6094,29 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="174" x="198.5" y="27.1543">CreateChannelInWorkSpace</text><line style="stroke:#A80036;stroke-width:1.5;" x1="170.5" x2="374.5" y1="39" y2="39"/><ellipse cx="180.5" cy="50" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="142" x="189.5" y="53.2104">(workSpaceId, channelId)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="170.5" x2="374.5" y1="59.8047" y2="59.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="94" x="175.5" y="74.0151">workSpaceId [fk]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="76" x="175.5" y="86.8198">channelId [fk]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="87" x="175.5" y="99.6245">createdAt: date</text><!--MD5=[a9c3623c9555da26f264934cf870880d]
class UserJoinWorkSpace--><rect codeLine="33" fill="#FEFECE" filter="url(#f1iijybiyjgz3m)" height="99.2188" id="UserJoinWorkSpace" style="stroke:#A80036;stroke-width:1.5;" width="153" x="7" y="172.5"/><ellipse cx="22" cy="188.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M26.1094,194.5 L18.3906,194.5 L18.3906,182.1094 L26.1094,182.1094 L26.1094,184.2656 L20.8438,184.2656 L20.8438,186.9375 L25.6094,186.9375 L25.6094,189.0938 L20.8438,189.0938 L20.8438,192.3438 L26.1094,192.3438 L26.1094,194.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="121" x="36" y="192.6543">UserJoinWorkSpace</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="159" y1="204.5" y2="204.5"/><ellipse cx="18" cy="215.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="124" x="27" y="218.7104">(userId, workSpaceId)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="8" x2="159" y1="225.3047" y2="225.3047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="58" x="13" y="239.5151">userId [fk]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="94" x="13" y="252.3198">workSpaceId [fk]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="78" x="13" y="265.1245">joinedAt: date</text><!--MD5=[b830e26f2e01df50af61896fdb4810f3]
class UserJoinChannel--><rect codeLine="43" fill="#FEFECE" filter="url(#f1iijybiyjgz3m)" height="99.2188" id="UserJoinChannel" style="stroke:#A80036;stroke-width:1.5;" width="134" x="195.5" y="172.5"/><ellipse cx="210.5" cy="188.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M214.6094,194.5 L206.8906,194.5 L206.8906,182.1094 L214.6094,182.1094 L214.6094,184.2656 L209.3438,184.2656 L209.3438,186.9375 L214.1094,186.9375 L214.1094,189.0938 L209.3438,189.0938 L209.3438,192.3438 L214.6094,192.3438 L214.6094,194.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="102" x="224.5" y="192.6543">UserJoinChannel</text><line style="stroke:#A80036;stroke-width:1.5;" x1="196.5" x2="328.5" y1="204.5" y2="204.5"/><ellipse cx="206.5" cy="215.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="106" x="215.5" y="218.7104">(userId, channelId)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="196.5" x2="328.5" y1="225.3047" y2="225.3047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="58" x="201.5" y="239.5151">userId [fk]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="76" x="201.5" y="252.3198">channelId [fk]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="78" x="201.5" y="265.1245">joinedAt: date</text><!--MD5=[bea5b0d46523efab5ea1c1d339f396f0]
class Message--><rect codeLine="54" fill="#FEFECE" filter="url(#f1iijybiyjgz3m)" height="86.4141" id="Message" style="stroke:#A80036;stroke-width:1.5;" width="100" x="405.5" y="338"/><ellipse cx="425.9" cy="354" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M430.0094,360 L422.2906,360 L422.2906,347.6094 L430.0094,347.6094 L430.0094,349.7656 L424.7438,349.7656 L424.7438,352.4375 L429.5094,352.4375 L429.5094,354.5938 L424.7438,354.5938 L424.7438,357.8438 L430.0094,357.8438 L430.0094,360 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="56" x="441.1" y="358.1543">Message</text><line style="stroke:#A80036;stroke-width:1.5;" x1="406.5" x2="504.5" y1="370" y2="370"/><ellipse cx="416.5" cy="381" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="10" x="425.5" y="384.2104">id</text><line style="stroke:#A80036;stroke-width:1.0;" x1="406.5" x2="504.5" y1="390.8047" y2="390.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="42" x="411.5" y="405.0151">content</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="88" x="411.5" y="417.8198">isRoot: boolean</text><path d="M540.5,361 L540.5,377 L505.6299,381 L540.5,385 L540.5,401.2656 A0,0 0 0 0 540.5,401.2656 L782.5,401.2656 A0,0 0 0 0 782.5,401.2656 L782.5,371 L772.5,361 L540.5,361 A0,0 0 0 0 540.5,361 " fill="#FBFB77" filter="url(#f1iijybiyjgz3m)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M772.5,361 L772.5,371 L782.5,371 L772.5,361 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="546.5" y="378.0669">一覧表示の際にルートメッセージのみ</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="546.5" y="393.1997">を表示するために、isRootを用意した</text><!--MD5=[cab1fb4490888b47e6dcbde5a00afd13]
class PostMessageToChannel--><rect codeLine="65" fill="#FEFECE" filter="url(#f1iijybiyjgz3m)" height="112.0234" id="PostMessageToChannel" style="stroke:#A80036;stroke-width:1.5;" width="182" x="364.5" y="166"/><ellipse cx="379.5" cy="182" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M383.6094,188 L375.8906,188 L375.8906,175.6094 L383.6094,175.6094 L383.6094,177.7656 L378.3438,177.7656 L378.3438,180.4375 L383.1094,180.4375 L383.1094,182.5938 L378.3438,182.5938 L378.3438,185.8438 L383.6094,185.8438 L383.6094,188 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="150" x="393.5" y="186.1543">PostMessageToChannel</text><line style="stroke:#A80036;stroke-width:1.5;" x1="365.5" x2="545.5" y1="198" y2="198"/><ellipse cx="375.5" cy="209" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="133" x="384.5" y="212.2104">(channelId, messageId)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="365.5" x2="545.5" y1="218.8047" y2="218.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="76" x="370.5" y="233.0151">channelId [fk]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85" x="370.5" y="245.8198">messageId [fk]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="69" x="370.5" y="258.6245">postAt: date</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="105" x="370.5" y="271.4292">postBy: userId [fk]</text><path d="M582,209.5 L582,218 L546.6794,222 L582,226 L582,234.6328 A0,0 0 0 0 582,234.6328 L759,234.6328 A0,0 0 0 0 759,234.6328 L759,219.5 L749,209.5 L582,209.5 A0,0 0 0 0 582,209.5 " fill="#FBFB77" filter="url(#f1iijybiyjgz3m)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M749,209.5 L749,219.5 L759,219.5 L749,209.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="588" y="226.5669">メッセージの投稿イベント</text><!--MD5=[f8bc5d155b46b75dad7578e4e8884f51]
class MessageThread--><rect codeLine="79" fill="#FEFECE" filter="url(#f1iijybiyjgz3m)" height="86.4141" id="MessageThread" style="stroke:#A80036;stroke-width:1.5;" width="289" x="311" y="484"/><ellipse cx="401.25" cy="500" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M405.3594,506 L397.6406,506 L397.6406,493.6094 L405.3594,493.6094 L405.3594,495.7656 L400.0938,495.7656 L400.0938,498.4375 L404.8594,498.4375 L404.8594,500.5938 L400.0938,500.5938 L400.0938,503.8438 L405.3594,503.8438 L405.3594,506 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="100" x="421.75" y="504.1543">MessageThread</text><line style="stroke:#A80036;stroke-width:1.5;" x1="312" x2="599" y1="516" y2="516"/><ellipse cx="322" cy="527" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="263" x="331" y="530.2104">(ascendantMessageId, descendantMessageId)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="312" x2="599" y1="536.8047" y2="536.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="142" x="317" y="551.0151">ascendantMessageId [fk]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="149" x="317" y="563.8198">descendantMessageId [fk]</text><path d="M85.5,514.5 L85.5,539.6328 A0,0 0 0 0 85.5,539.6328 L275.5,539.6328 A0,0 0 0 0 275.5,539.6328 L275.5,532.5 L310.939,527 L275.5,524.5 L275.5,524.5 L265.5,514.5 L85.5,514.5 A0,0 0 0 0 85.5,514.5 " fill="#FBFB77" filter="url(#f1iijybiyjgz3m)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M265.5,514.5 L265.5,524.5 L275.5,524.5 L265.5,514.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="91.5" y="531.5669">メッセージの階層構造を保持</text><!--MD5=[5a4fecc541932eb971924d8743fee7c7]
link WorkSpace to CreateChannelInWorkSpace--><path codeLine="30" d="M142.6461,57 C142.6461,57 161.2416,57 161.2416,57 " fill="none" id="WorkSpace-CreateChannelInWorkSpace" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="161.2416" x2="169.2416" y1="57" y2="51"/><line style="stroke:#A80036;stroke-width:1.0;" x1="161.2416" x2="169.2416" y1="57" y2="63"/><line style="stroke:#A80036;stroke-width:1.0;" x1="161.2416" x2="169.2416" y1="57" y2="57"/><ellipse cx="155.2416" cy="57" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.0;fill:none;"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="138.6461" x2="138.6461" y1="61" y2="53"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="141.6461" x2="141.6461" y1="61" y2="53"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="142.6461" x2="134.6461" y1="57" y2="57"/><!--MD5=[e5f1df546c5e11861f9bb6b2ae724314]
link CreateChannelInWorkSpace to Channel--><path codeLine="31" d="M383.6417,57 C383.6417,57 402.8811,57 402.8811,57 " fill="none" id="CreateChannelInWorkSpace-Channel" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="406.8811" x2="406.8811" y1="53" y2="61"/><line style="stroke:#A80036;stroke-width:1.0;" x1="403.8811" x2="403.8811" y1="53" y2="61"/><line style="stroke:#A80036;stroke-width:1.0;" x1="402.8811" x2="410.8811" y1="57" y2="57"/><line style="stroke:#A80036;stroke-width:1.0;" x1="383.6417" x2="375.6417" y1="57" y2="63"/><line style="stroke:#A80036;stroke-width:1.0;" x1="383.6417" x2="375.6417" y1="57" y2="51"/><line style="stroke:#A80036;stroke-width:1.0;" x1="383.6417" x2="375.6417" y1="57" y2="57"/><ellipse cx="389.6417" cy="57" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.0;fill:none;"/><!--MD5=[646ea24a46f32fc483097835c23d61f0]
link WorkSpace to UserJoinWorkSpace--><path codeLine="40" d="M83.5,101.6414 C83.5,101.6414 83.5,164.4251 83.5,164.4251 " fill="none" id="WorkSpace-UserJoinWorkSpace" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="83.5" x2="89.5" y1="164.4251" y2="172.4251"/><line style="stroke:#A80036;stroke-width:1.0;" x1="83.5" x2="77.5" y1="164.4251" y2="172.4251"/><line style="stroke:#A80036;stroke-width:1.0;" x1="83.5" x2="83.5" y1="164.4251" y2="172.4251"/><ellipse cx="83.5" cy="158.4251" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.0;fill:none;"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="79.5" x2="87.5" y1="97.6414" y2="97.6414"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="79.5" x2="87.5" y1="100.6414" y2="100.6414"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="83.5" x2="83.5" y1="101.6414" y2="93.6414"/><!--MD5=[f1176099b939cee3111544fd37171cfd]
link UserJoinWorkSpace to User--><path codeLine="41" d="M122.75,279.8723 C122.75,279.8723 122.75,381 122.75,381 C122.75,381 223.8313,381 223.8313,381 " fill="none" id="UserJoinWorkSpace-User" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="227.8313" x2="227.8313" y1="377" y2="385"/><line style="stroke:#A80036;stroke-width:1.0;" x1="224.8313" x2="224.8313" y1="377" y2="385"/><line style="stroke:#A80036;stroke-width:1.0;" x1="223.8313" x2="231.8313" y1="381" y2="381"/><line style="stroke:#A80036;stroke-width:1.0;" x1="122.75" x2="116.75" y1="279.8723" y2="271.8723"/><line style="stroke:#A80036;stroke-width:1.0;" x1="122.75" x2="128.75" y1="279.8723" y2="271.8723"/><line style="stroke:#A80036;stroke-width:1.0;" x1="122.75" x2="122.75" y1="279.8723" y2="271.8723"/><ellipse cx="122.75" cy="285.8723" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.0;fill:none;"/><!--MD5=[c280191b43dd27bdd7b9aa39577a1ebd]
link Channel to UserJoinChannel--><path codeLine="51" d="M438.6667,101.9221 C438.6667,101.9221 438.6667,136 438.6667,136 C438.6667,136 262.5,136 262.5,136 C262.5,136 262.5,164.4717 262.5,164.4717 " fill="none" id="Channel-UserJoinChannel" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="262.5" x2="268.5" y1="164.4717" y2="172.4717"/><line style="stroke:#A80036;stroke-width:1.0;" x1="262.5" x2="256.5" y1="164.4717" y2="172.4717"/><line style="stroke:#A80036;stroke-width:1.0;" x1="262.5" x2="262.5" y1="164.4717" y2="172.4717"/><ellipse cx="262.5" cy="158.4717" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.0;fill:none;"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="434.6667" x2="442.6667" y1="97.9221" y2="97.9221"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="434.6667" x2="442.6667" y1="100.9221" y2="100.9221"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="438.6667" x2="438.6667" y1="101.9221" y2="93.9221"/><!--MD5=[91907ad80c491fbdadafa69675a4daf1]
link UserJoinChannel to User--><path codeLine="52" d="M262.5,279.8723 C262.5,279.8723 262.5,335.9222 262.5,335.9222 " fill="none" id="UserJoinChannel-User" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="266.5" x2="258.5" y1="339.9222" y2="339.9222"/><line style="stroke:#A80036;stroke-width:1.0;" x1="266.5" x2="258.5" y1="336.9222" y2="336.9222"/><line style="stroke:#A80036;stroke-width:1.0;" x1="262.5" x2="262.5" y1="335.9222" y2="343.9222"/><line style="stroke:#A80036;stroke-width:1.0;" x1="262.5" x2="256.5" y1="279.8723" y2="271.8723"/><line style="stroke:#A80036;stroke-width:1.0;" x1="262.5" x2="268.5" y1="279.8723" y2="271.8723"/><line style="stroke:#A80036;stroke-width:1.0;" x1="262.5" x2="262.5" y1="279.8723" y2="271.8723"/><ellipse cx="262.5" cy="285.8723" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.0;fill:none;"/><!--MD5=[3b3801a0d6d44acffa201538ea3e2a00]
link Channel to PostMessageToChannel--><path codeLine="75" d="M466.3333,101.6414 C466.3333,101.6414 466.3333,157.7934 466.3333,157.7934 " fill="none" id="Channel-PostMessageToChannel" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="466.3333" x2="472.3333" y1="157.7934" y2="165.7934"/><line style="stroke:#A80036;stroke-width:1.0;" x1="466.3333" x2="460.3333" y1="157.7934" y2="165.7934"/><line style="stroke:#A80036;stroke-width:1.0;" x1="466.3333" x2="466.3333" y1="157.7934" y2="165.7934"/><ellipse cx="466.3333" cy="151.7934" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.0;fill:none;"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="462.3333" x2="470.3333" y1="97.6414" y2="97.6414"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="462.3333" x2="470.3333" y1="100.6414" y2="100.6414"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="466.3333" x2="466.3333" y1="101.6414" y2="93.6414"/><!--MD5=[c1be753770fe14421c4c659585df3cb2]
link PostMessageToChannel to Message--><path codeLine="76" d="M455.5,286.0575 C455.5,286.0575 455.5,329.9363 455.5,329.9363 " fill="none" id="PostMessageToChannel-Message" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="459.5" x2="451.5" y1="333.9363" y2="333.9363"/><line style="stroke:#A80036;stroke-width:1.0;" x1="459.5" x2="451.5" y1="330.9363" y2="330.9363"/><line style="stroke:#A80036;stroke-width:1.0;" x1="455.5" x2="455.5" y1="329.9363" y2="337.9363"/><line style="stroke:#A80036;stroke-width:1.0;" x1="455.5" x2="449.5" y1="286.0575" y2="278.0575"/><line style="stroke:#A80036;stroke-width:1.0;" x1="455.5" x2="461.5" y1="286.0575" y2="278.0575"/><line style="stroke:#A80036;stroke-width:1.0;" x1="455.5" x2="455.5" y1="286.0575" y2="278.0575"/><ellipse cx="455.5" cy="292.0575" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.0;fill:none;"/><!--MD5=[105d72eaa5498a378caf159a4c9c601d]
link PostMessageToChannel to User--><path codeLine="77" d="M385,286.0575 C385,286.0575 385,381 385,381 C385,381 301.0959,381 301.0959,381 " fill="none" id="PostMessageToChannel-User" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="297.0959" x2="297.0959" y1="385" y2="377"/><line style="stroke:#A80036;stroke-width:1.0;" x1="300.0959" x2="300.0959" y1="385" y2="377"/><line style="stroke:#A80036;stroke-width:1.0;" x1="301.0959" x2="293.0959" y1="381" y2="381"/><line style="stroke:#A80036;stroke-width:1.0;" x1="385" x2="377" y1="286.0575" y2="278.0575"/><line style="stroke:#A80036;stroke-width:1.0;" x1="385" x2="393" y1="286.0575" y2="278.0575"/><line style="stroke:#A80036;stroke-width:1.0;" x1="385" x2="385" y1="286.0575" y2="278.0575"/><!--MD5=[50f82dda76588166f5f40c17bc978680]
link Message to MessageThread--><path codeLine="87" d="M455.5,432.0152 C455.5,432.0152 455.5,475.7878 455.5,475.7878 " fill="none" id="Message-MessageThread" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="455.5" x2="461.5" y1="475.7878" y2="483.7878"/><line style="stroke:#A80036;stroke-width:1.0;" x1="455.5" x2="449.5" y1="475.7878" y2="483.7878"/><line style="stroke:#A80036;stroke-width:1.0;" x1="455.5" x2="455.5" y1="475.7878" y2="483.7878"/><ellipse cx="455.5" cy="469.7878" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.0;fill:none;"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="451.5" x2="459.5" y1="428.0152" y2="428.0152"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="451.5" x2="459.5" y1="431.0152" y2="431.0152"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="455.5" x2="455.5" y1="432.0152" y2="424.0152"/><!--MD5=[d68c99a259ce85386a90a9ee8cde3722]
@startuml
skinparam linetype ortho

Entity User {
  + id
  - -
  name
}

Entity WorkSpace {
  + id
  - -
  name
}

Entity Channel {
  + id
  - -
  name
}


Entity CreateChannelInWorkSpace {
  + (workSpaceId, channelId)
  - -
  workSpaceId [fk]
  channelId [fk]
  createdAt: date
}

WorkSpace ||-o{ CreateChannelInWorkSpace
CreateChannelInWorkSpace }o-|| Channel

Entity UserJoinWorkSpace {
  + (userId, workSpaceId)
  - -
  userId [fk]
  workSpaceId [fk]
  joinedAt: date
}
WorkSpace ||- -o{ UserJoinWorkSpace
UserJoinWorkSpace }o- -|| User

Entity UserJoinChannel {
  + (userId, channelId)
  - -
  userId [fk]
  channelId [fk]
  joinedAt: date
}

Channel ||- -o{ UserJoinChannel
UserJoinChannel }o- -|| User

Entity Message {
  + id
  - -
  content
  isRoot: boolean
}
note right
一覧表示の際にルートメッセージのみ
を表示するために、isRootを用意した
end note

Entity PostMessageToChannel {
  + (channelId, messageId)
  - -
  channelId [fk]
  messageId [fk]
  postAt: date
  postBy: userId [fk]
}
note right: メッセージの投稿イベント

Channel ||- -o{ PostMessageToChannel
PostMessageToChannel }o- -|| Message
PostMessageToChannel }- -|| User

Entity MessageThread {
  + (ascendantMessageId, descendantMessageId)
  - -
  ascendantMessageId [fk]
  descendantMessageId [fk]
}
note left: メッセージの階層構造を保持

Message ||- -o{ MessageThread
@enduml

PlantUML version 1.2021.5(Sun Apr 25 11:20:28 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>